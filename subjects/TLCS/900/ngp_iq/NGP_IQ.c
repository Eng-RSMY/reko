// NGP_IQ.c
// Generated by decompiling NGP_IQ.NGP
// using Reko decompiler version 0.6.2.0.

#include "NGP_IQ.h"

void fn00200089(word16 de, word32 xsp)
{
	fn0020060C();
	*(ui32 *) 0x6F86 = *(ui32 *) 0x6F86 | 0x40;
	word32 xsp_3 = DPB(xsp, fp, 0);
	word32 * xiy_14 = (word32 *) 28600;
	byte b_15 = 0x12;
	do
	{
		*xiy_14 = globals->dw200040;
		xiy_14 = xiy_14 + 0x01;
		b_15 = b_15 - 0x01;
	} while (b_15 != 0x00);
	*(byte *) 0x8002 = 0x00;
	*(byte *) 0x8003 = 0x00;
	*(byte *) 0x8004 = 0xA0;
	*(byte *) 0x8005 = 0x98;
	word16 * xhl_38 = (word16 *) 0xA000;
	word16 bc_40 = 0x0200;
	do
	{
		*xhl_38 = 0x00;
		xhl_38 = xhl_38 + 0x01;
		bc_40 = bc_40 - 0x01;
	} while (bc_40 != 0x00);
	word16 bc_55 = 0x0250;
	word16 * xde_59 = (word16 *) 0xA400;
	word16 * xhl_62 = globals->a20061D;
	do
	{
		*xde_59 = *xhl_62;
		xhl_62 = xhl_62 + 0x01;
		xde_59 = xde_59 + 0x01;
		bc_55 = bc_55 - 0x01;
	} while (bc_55 != 0x00);
	word32 xbc_82 = fn002005B8();
	__ei(0x00);
	word16 bc_103 = 0x10;
	word32 xbc_106 = DPB(xbc_82, 0x10, 0);
	word16 * xde_100 = (word16 *) 0x8300;
	word16 * xhl_90 = globals->a200ABD;
	do
	{
		*xde_100 = *xhl_90;
		bc_103 = bc_103 - 0x01;
		xhl_90 = xhl_90 + 0x01;
		xde_100 = xde_100 + 0x01;
		xbc_106 = DPB(xbc_106, bc_103, 0);
	} while (bc_103 != 0x00);
	*(byte *) 0x83E0 = 0x33;
	*(byte *) 33761 = 0x07;
	*(byte *) 0x8118 = 0x80;
	word16 bc_124;
	word32 xde_125;
	word32 xsp_126;
	word16 wa_128 = (word16) fn00200557(0x00, DPB(xbc_106, 0x00, 8), DPB(xde_100, 0x04, 8), &globals->b2000FD, xsp_3, out bc_124, out xde_125, out xsp_126);
	word16 bc_139;
	word32 xde_140;
	word32 xsp_141;
	word16 wa_143 = (word16) fn00200557(wa_128, DPB(xbc_106, 0x01, 8), DPB(xde_125, 0x04, 8), &globals->b200122, xsp_126, out bc_139, out xde_140, out xsp_141);
	word16 bc_154;
	word32 xde_155;
	word32 xsp_156;
	word16 wa_158 = (word16) fn00200557(wa_143, DPB(xbc_106, 0x04, 8), DPB(xde_140, 0x04, 8), &globals->b200147, xsp_141, out bc_154, out xde_155, out xsp_156);
	word16 bc_169;
	word32 xde_170;
	word32 xsp_171;
	word16 wa_173 = (word16) fn00200557(wa_158, DPB(xbc_106, 0x05, 8), DPB(xde_155, 0x02, 8), &globals->b200165, xsp_156, out bc_169, out xde_170, out xsp_171);
	word32 xbc_182 = DPB(xbc_106, 0x06, 8);
	word16 bc_183;
	word32 xde_184;
	ptr32 xsp_185;
	word32 xwa_186 = fn00200557(wa_173, xbc_182, DPB(xde_170, 0x02, 8), &globals->b20017F, xsp_171, out bc_183, out xde_184, out xsp_185);
	byte * xde_190 = (byte *) 0x7000;
	byte * xhl_193 = &globals->b200363;
	word16 bc_195 = 303;
	word32 xbc_198 = DPB(xbc_182, 303, 0);
	do
	{
		*xde_190 = *xhl_193;
		bc_195 = bc_195 - 0x01;
		xhl_193 = xhl_193 + 0x01;
		xde_190 = xde_190 + 0x01;
		xbc_198 = DPB(xbc_198, bc_195, 0);
	} while (bc_195 != 0x00);
	word32 xsp_219 = fn002004F2(DPB(xwa_186, 0x01, 8), xsp_185);
	word32 xwa_221 = 0x7000;
	if (true)
	{
		word16 sp_678;
		word32 xix_679;
		word32 xiy_680;
		byte b_681;
		word16 wa_683;
		word16 bc_685;
		bool H_687;
		bool V_688;
		bool N_689;
		byte d_690;
		byte c_691;
		byte w_692;
		word16 hl_693;
		byte a_694;
		byte SZHVC_695;
		bool Z_696;
		word16 de_697;
		((<anonymous> **) 0x7000)();
	}
	word32 xsp_279;
	word32 xde_278;
	word32 xbc_276;
	word16 wa_269;
	word32 xbc_246;
	byte * xde_247;
	word32 xhl_248;
	word32 xsp_249;
	word32 xwa_255 = DPB(fn00200532(DPB(xwa_221, 0x04, 8), xbc_198, xde_190, DPB(xhl_193, 3334, 0), xsp_219, out xbc_246, out xde_247, out xhl_248, out xsp_249), 0x04, 8);
	word32 xbc_256;
	word32 xde_257;
	word32 xhl_258;
	word32 xsp_259;
	word16 wa_261 = (word16) fn00200532(xwa_255, xbc_246, xde_247, DPB(xhl_248, 3333, 0), xsp_249, out xbc_256, out xde_257, out xhl_258, out xsp_259);
	if (*(byte *) 0x4003 == 0x04)
	{
		xbc_276 = DPB(xbc_256, 0x04, 8);
		word16 bc_653;
		wa_269 = (word16) fn00200557(wa_261, xbc_276, DPB(xde_257, 0x01, 8), &globals->b2001D2, xsp_259, out bc_653, out xde_278, out xsp_279);
	}
	else
	{
		xbc_276 = DPB(xbc_256, 0x04, 8);
		word16 bc_668;
		wa_269 = (word16) fn00200557(wa_261, xbc_276, DPB(xde_257, 0x03, 8), &globals->b2001E8, xsp_259, out bc_668, out xde_278, out xsp_279);
	}
	word16 bc_289;
	word32 xde_290;
	word32 xsp_291;
	word16 wa_293 = (word16) fn00200557(wa_269, DPB(xbc_276, 0x08, 8), DPB(xde_278, 0x04, 8), &globals->b2001FD, xsp_279, out bc_289, out xde_290, out xsp_291);
	word16 bc_304;
	word32 xde_305;
	word32 xsp_306;
	word16 wa_308 = (word16) fn00200557(wa_293, DPB(xbc_276, 0x09, 8), DPB(xde_290, 0x02, 8), &globals->b200217, xsp_291, out bc_304, out xde_305, out xsp_306);
	word32 xbc_317 = DPB(xbc_276, 0x0A, 8);
	word16 bc_318;
	word32 xde_319;
	ptr32 xsp_320;
	word32 xwa_321 = fn00200557(wa_308, xbc_317, DPB(xde_305, 0x02, 8), &globals->b200231, xsp_306, out bc_318, out xde_319, out xsp_320);
	byte * xde_325 = (byte *) 0x7000;
	byte * xhl_328 = &globals->b200492;
	word16 bc_330 = 0x23;
	word32 xbc_333 = DPB(xbc_317, 0x23, 0);
	do
	{
		*xde_325 = *xhl_328;
		bc_330 = bc_330 - 0x01;
		xhl_328 = xhl_328 + 0x01;
		xde_325 = xde_325 + 0x01;
		xbc_333 = DPB(xbc_333, bc_330, 0);
	} while (bc_330 != 0x00);
	word32 xsp_354 = fn002004F2(DPB(xwa_321, 0x01, 8), xsp_320);
	word32 xwa_356 = 0x7000;
	if (true)
	{
		word16 sp_623;
		word32 xix_624;
		word32 xiy_625;
		byte b_626;
		word16 wa_628;
		word16 bc_630;
		bool H_632;
		bool V_633;
		bool N_634;
		byte d_635;
		byte c_636;
		byte w_637;
		word16 hl_638;
		byte a_639;
		byte SZHVC_640;
		bool Z_641;
		word16 de_642;
		((<anonymous> **) 0x7000)();
	}
	word32 xsp_414;
	word32 xde_413;
	word32 xbc_411;
	word16 wa_404;
	word32 xbc_381;
	byte * xde_382;
	word32 xhl_383;
	word32 xsp_384;
	word32 xwa_390 = DPB(fn00200532(DPB(xwa_356, 0x04, 8), xbc_333, xde_325, DPB(xhl_328, 3338, 0), xsp_354, out xbc_381, out xde_382, out xhl_383, out xsp_384), 0x04, 8);
	word32 xbc_391;
	word32 xde_392;
	word32 xhl_393;
	word32 xsp_394;
	word16 wa_396 = (word16) fn00200532(xwa_390, xbc_381, xde_382, DPB(xhl_383, 3337, 0), xsp_384, out xbc_391, out xde_392, out xhl_393, out xsp_394);
	if (*(byte *) 0x4003 == 0x01)
	{
		xbc_411 = DPB(xbc_391, 0x08, 8);
		word16 bc_600;
		wa_404 = (word16) fn00200557(wa_396, xbc_411, DPB(xde_392, 0x01, 8), &globals->b200284, xsp_394, out bc_600, out xde_413, out xsp_414);
	}
	else
	{
		xbc_411 = DPB(xbc_391, 0x08, 8);
		word16 bc_615;
		wa_404 = (word16) fn00200557(wa_396, xbc_411, DPB(xde_392, 0x03, 8), &globals->b20029A, xsp_394, out bc_615, out xde_413, out xsp_414);
	}
	word16 bc_424;
	word32 xde_425;
	word32 xsp_426;
	word16 wa_428 = (word16) fn00200557(wa_404, DPB(xbc_411, 0x0C, 8), DPB(xde_413, 0x04, 8), &globals->b2002AF, xsp_414, out bc_424, out xde_425, out xsp_426);
	word16 bc_439;
	word32 xde_440;
	word32 xsp_441;
	word16 wa_443 = (word16) fn00200557(wa_428, DPB(xbc_411, 0x0D, 8), DPB(xde_425, 0x02, 8), &globals->b2002CB, xsp_426, out bc_439, out xde_440, out xsp_441);
	word32 xbc_452 = DPB(xbc_411, 0x0E, 8);
	word16 bc_453;
	word32 xde_454;
	ptr32 xsp_455;
	word32 xwa_456 = fn00200557(wa_443, xbc_452, DPB(xde_440, 0x02, 8), &globals->b2002E5, xsp_441, out bc_453, out xde_454, out xsp_455);
	byte * xde_460 = (byte *) 0x7000;
	byte * xhl_463 = &globals->b2004B5;
	word16 bc_465 = 0x2B;
	word32 xbc_468 = DPB(xbc_452, 0x2B, 0);
	do
	{
		*xde_460 = *xhl_463;
		bc_465 = bc_465 - 0x01;
		xhl_463 = xhl_463 + 0x01;
		xde_460 = xde_460 + 0x01;
		xbc_468 = DPB(xbc_468, bc_465, 0);
	} while (bc_465 != 0x00);
	word32 xsp_489 = fn002004F2(DPB(xwa_456, 0x01, 8), xsp_455);
	word32 xwa_491 = 0x7000;
	if (true)
	{
		word16 sp_570;
		word32 xix_571;
		word32 xiy_572;
		byte b_573;
		word16 wa_575;
		word16 bc_577;
		bool H_579;
		bool V_580;
		bool N_581;
		byte d_582;
		byte c_583;
		byte w_584;
		word16 hl_585;
		byte a_586;
		byte SZHVC_587;
		bool Z_588;
		word16 de_589;
		((<anonymous> **) 0x7000)();
	}
	word32 xbc_516;
	byte * xde_517;
	word32 xhl_518;
	word32 xsp_519;
	word32 xwa_525 = DPB(fn00200532(DPB(xwa_491, 0x04, 8), xbc_468, xde_460, DPB(xhl_463, 0x0D0E, 0), xsp_489, out xbc_516, out xde_517, out xhl_518, out xsp_519), 0x04, 8);
	word32 xbc_526;
	word32 xde_527;
	word32 xhl_528;
	word32 xsp_529;
	word16 wa_531 = (word16) fn00200532(xwa_525, xbc_516, xde_517, DPB(xhl_518, 0x0D0D, 0), xsp_519, out xbc_526, out xde_527, out xhl_528, out xsp_529);
	if (*(byte *) 0x4003 == 0x00)
	{
		word16 bc_554;
		word32 xde_555;
		word32 xsp_556;
		fn00200557(wa_531, DPB(xbc_526, 0x0C, 8), DPB(xde_527, 0x01, 8), &globals->b200338, xsp_529, out bc_554, out xde_555, out xsp_556);
	}
	else
	{
		word16 bc_565;
		word32 xde_566;
		word32 xsp_567;
		fn00200557(wa_531, DPB(xbc_526, 0x0C, 8), DPB(xde_527, 0x03, 8), &globals->b20034E, xsp_529, out bc_565, out xde_566, out xsp_567);
	}
	while (true)
		;
}

ptr32 fn002004F2(word32 xwa, ptr32 xsp)
{
	ptr32 xsp_3 = DPB(xsp, fp, 0);
	*(xsp_3 - 0x04) = xwa;
	*(byte *) 0x4004 = 0x00;
	do
		;
	while (*(byte *) 0x4004 != w);
	return xsp_3;
}

word32 fn0020050A(byte w, byte a, word32 xbc, byte * xde, byte * xhl, ptr32 xsp, ptr32 & xdeOut, ptr32 & xhlOut, ptr32 & xspOut)
{
	ptr32 xsp_3 = DPB(xsp, fp, 0);
	*(xsp_3 - 0x04) = (byte **) xhl;
	*(xsp_3 - 0x08) = (byte **) xde;
	*(xsp_3 - 0x0C) = xbc;
	struct Eq_716 * xde_27 = DPB(0x9800, DPB(bc, 0x00, 8) * 0x02 + 0x9800 + DPB(hl, 0x00, 8) * 0x40, 0);
	xde_27->b0000 = a;
	xde_27->b0001 = w;
	word32 xde_42;
	*xdeOut = *(xsp_3 - 0x08);
	word32 xhl_45;
	*xhlOut = *(xsp_3 - 0x04);
	word32 xsp_48;
	*xspOut = xsp_3;
	return *(xsp_3 - 0x0C);
}

word32 fn00200532(word32 xwa, word32 xbc, byte * xde, byte * xhl, word32 xsp, ptr32 & xbcOut, ptr32 & xdeOut, ptr32 & xhlOut, ptr32 & xspOut)
{
	ptr32 xsp_3 = DPB(xsp, fp, 0);
	*(xsp_3 - 0x04) = (byte **) xhl;
	*(xsp_3 - 0x08) = xbc;
	*(xsp_3 - 0x0C) = xwa;
	byte * xde_23;
	word32 xhl_24;
	ptr32 xsp_25;
	word32 xbc_26 = fn0020050A(w, ((a & 0xF0) >> 0x04) + 0x40, DPB(xbc, a, 0), xde, xhl, xsp_3 - 0x0C, out xde_23, out xhl_24, out xsp_25);
	word32 xde_36;
	word32 xhl_37;
	struct Eq_798 * xsp_38;
	fn0020050A(w, ((byte) xbc_26 & 0x0F) + 0x40, xbc_26, xde_23, DPB(xhl_24, h + 0x01, 8), xsp_25, out xde_36, out xhl_37, out xsp_38);
	word32 xbc_44;
	*xbcOut = xsp_38->dw0004;
	word32 xhl_47;
	*xhlOut = xsp_38->dw0008;
	word32 xsp_49;
	*xspOut = &xsp_38->dw0008 + 0x01;
	return xsp_38->dw0000;
}

word32 fn00200557(word16 wa, word32 xbc, word16 * xde, byte * xhl, word32 xsp, Eq_147 & bcOut, ptr32 & xdeOut, ptr32 & xspOut)
{
	word32 * xsp_3 = DPB(xsp, fp, 0);
	*(xsp_3 - 0x04) = (byte **) xhl;
	*(xsp_3 - 0x08) = (word16 **) xde;
	*(ui8 *) 0x4002 = d << 0x01;
	uint16 bc_29 = DPB(bc, 0x00, 8);
	word32 xwa_112 = (word32) (c * 0x02);
	word16 wa_23 = DPB(wa, c * 0x02, 0);
	byte * xde_104 = xwa_112 + 0x9800 + DPB(xbc, bc_29 * 0x40, 0);
	byte b_108 = 0x13;
	word16 bc_109;
	*bcOut = DPB(bc_29 * 0x40, 0x13, 8);
l00200579:
	cu8 v18_52 = *xhl;
	xwa_112 = DPB(xwa_112, v18_52, 0);
	word16 wa_113 = DPB(wa_23, v18_52, 0);
	if (v18_52 != 0x00)
	{
		xhl = xhl + 0x01;
		if (v18_52 >= 0x5B)
		{
			xwa_112 = DPB(xwa_112, v18_52 + 0xE0, 0);
			wa_113 = DPB(wa_23, v18_52 + 0xE0, 0);
		}
		word16 wa_90 = DPB(wa_113, 0x00, 8);
		byte w_95 = SLICE(wa_90 + 0x09, byte, 8) + *((byte *) 0x4002);
		*xde_104 = (byte) (wa_90 + 0x09);
		byte * xde_101 = xde_104 + 0x01;
		*xde_101 = w_95;
		b_108 = b_108 - 0x01;
		xwa_112 = DPB(xwa_112, w_95, 8);
		wa_23 = DPB(wa_90 + 0x09, w_95, 8);
		xde_104 = xde_101 + 0x01;
		*bcOut = DPB(bc_109, b_108, 8);
		if (b_108 != 0x00)
			goto l00200579;
	}
	return xwa_112;
	word32 xde_74;
	*xdeOut = *xsp_3;
	word32 xsp_78;
	*xspOut = xsp_3 + 0x02;
	return xwa_112;
}

byte * fn002005B8()
{
	byte * xbc_2 = (byte *) 0x9000;
	word16 hl_3 = 0x04C0;
	do
	{
		*xbc_2 = 0x00;
		xbc_2 = xbc_2 + 0x01;
		hl_3 = hl_3 - 0x01;
	} while (hl_3 != 0x00);
	byte * xbc_13 = (byte *) 0x9800;
	word16 hl_14 = 0x04C0;
	do
	{
		*xbc_13 = 0x00;
		xbc_13 = xbc_13 + 0x01;
		hl_14 = hl_14 - 0x01;
	} while (hl_14 != 0x00);
	return xbc_13;
}

void fn0020060C()
{
	if (*(byte *) 0x6F91 == 0x00)
	{
		*(ui32 *) 0x6F83 = *(ui32 *) 0x6F83 & ~0x08;
		*(byte *) 0x6DA0 = 0x00;
	}
	return;
}

